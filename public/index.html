<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Allstar Sign In</title>
<style>
:root{ --bg:#0f1115; --card:#161b22; --text:#e5e7eb; --muted:#9ca3af;
       --brand:#c0392b; --brand-700:#a93226; --border:#2b3340; }
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;display:grid;place-items:center}
.card{width:100%;max-width:420px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:22px}
h1{margin:0 0 6px;font-size:22px}
.muted{color:var(--muted);margin-bottom:14px}
.label{font-size:12px;color:var(--muted);margin:12px 0 6px}
.field{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0b0f13;color:var(--text)}
.btn{width:100%;margin-top:14px;padding:10px 12px;border-radius:10px;border:1px solid var(--brand);background:var(--brand);color:#fff;cursor:pointer;font-weight:600}
.btn:hover{background:var(--brand-700)}
.error{display:none;margin-top:10px;color:#ffdada;background:rgba(192,57,43,.12);border:1px solid rgba(192,57,43,.35);padding:8px 10px;border-radius:10px}
</style>
</head>
<body>
  <div class="card">
    <h1>Allstar <span style="color:var(--brand);font-weight:800">Agent Hub</span></h1>
    <div class="muted">Sign in with your scheduling credentials.</div>
    <div class="label">Email</div>
    <input id="email" class="field" type="email" placeholder="you@company.com" autocomplete="username"/>
    <div class="label">Password</div>
    <input id="password" class="field" type="password" placeholder="••••••••" autocomplete="current-password"/>
    <button id="loginBtn" class="btn">Sign In</button>
    <div id="err" class="error"></div>
  </div>

<script>
const API = "/api";
document.getElementById('loginBtn').addEventListener('click', async ()=>{
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  const err = document.getElementById('err'); err.style.display='none';
  if(!email || !password){ err.textContent="Enter email and password."; err.style.display='block'; return; }
  try{
    const r = await fetch(API + "/login", {
      method: "POST",
      credentials: "include",
      headers: { "content-type":"application/json" },
      body: JSON.stringify({ email, password })
    });
    if(!r.ok) throw new Error("Invalid email or password");
    // after login, go to hub
    location.href = "/hub";
  }catch(e){
    err.textContent = e.message || "Login failed";
    err.style.display = 'block';
  }
});
</script>
</body>
</html>
